a# 🔍 Exploração do Site — 👨‍🔬 Penetratium ☢️ - 🧬 Team 📡

## 🔗 Materia Segurança Ofensiva 📕

- 👨‍🏫 **Professor:** JPGress
- 🔍 **Tipo:** Exploration 

---
# **🔎 Comandos de Exploração de Arquivos**

## comando : find /var/www/html -name "*.php" -exec grep -l "mysql_connect\|password\|user" {} \;

```ruby
  /var/www/html/prog/submission.php
  /var/www/html/prog/auth.php
  /var/www/html/prog/db.php
  /var/www/html/submit.php
  /var/www/html/login.php
```

## Verificar arquivos SUID  : find / -perm -4000 2>/dev/null
```ruby
    /bin/ping
    /bin/fusermount
    /bin/su
    /bin/mount
    /bin/umount
    /bin/ping6
    /usr/bin/mtr
    /usr/bin/passwd
    /usr/bin/traceroute6.iputils
    /usr/bin/newgrp
    /usr/bin/sudo
    /usr/bin/pkexec
    /usr/bin/gpasswd
    /usr/bin/chsh
    /usr/bin/chfn
    /usr/bin/at
    /usr/lib/eject/dmcrypt-get-device
    /usr/lib/policykit-1/polkit-agent-helper-1
    /usr/lib/openssh/ssh-keysign
    /usr/lib/dbus-1.0/dbus-daemon-launch-helper
    /usr/sbin/uuidd
    /usr/sbin/pppd
```

## comando : grep -r "password\|user\|mysql" /var/www/html --include="*.php"

```ruby
  /var/www/html/prog/submission.php:  public $id, $title, $email, $password, $description, $bio, $filename, $admin;
  /var/www/html/prog/submission.php:  function __construct($id, $title, $email, $password, $description, $bio, $filename ){
  /var/www/html/prog/submission.php:    $this->password = $password;
  /var/www/html/prog/submission.php:                          $row['password'], $row['description'],
  /var/www/html/prog/submission.php:      $sql .= mysql_real_escape_string( $_POST["email"]);
  /var/www/html/prog/submission.php:      $sql .= "' and password='";
  /var/www/html/prog/submission.php:      $sql .= mysql_real_escape_string( $_POST["password"]);
  /var/www/html/prog/submission.php:      $result = mysql_query($sql);
  /var/www/html/prog/submission.php:      while ($row = mysql_fetch_assoc($result)) {
  /var/www/html/prog/submission.php:    $results = mysql_query("SELECT * FROM submissions");
  /var/www/html/prog/submission.php:      while ($row = mysql_fetch_assoc($results)) {
  /var/www/html/prog/submission.php:      echo mysql_error();
  /var/www/html/prog/submission.php:    $result = mysql_query("SELECT * FROM pictures where id=".$id);
  /var/www/html/prog/submission.php:    $row = mysql_fetch_assoc($result); 
  /var/www/html/prog/submission.php:    $result = mysql_query("DELETE FROM pictures where id=".(int)$id);
  /var/www/html/prog/submission.php:    $result= mysql_query("SELECT * FROM pictures ORDER BY id DESC LIMIT 1");
  /var/www/html/prog/submission.php:    $row = mysql_fetch_assoc($result);
  /var/www/html/prog/submission.php:    $result= mysql_query("SELECT * FROM pictures where id=".$id);
  /var/www/html/prog/submission.php:    $row = mysql_fetch_assoc($result);
  /var/www/html/prog/submission.php:      $sql = "INSERT INTO submissions (email,password,";
  /var/www/html/prog/submission.php:      $title = mysql_real_escape_string($_POST["title"]);
  /var/www/html/prog/submission.php:      $file = $dir.mysql_real_escape_string( $file);
  /var/www/html/prog/submission.php:      $email = mysql_real_escape_string( $_POST["email"]);
  /var/www/html/prog/submission.php:      $password = mysql_real_escape_string( $_POST["password"]);
  /var/www/html/prog/submission.php:      $bio = mysql_real_escape_string( $_POST["bio"]);
  /var/www/html/prog/submission.php:      $description = mysql_real_escape_string( $_POST["description"]);
  /var/www/html/prog/submission.php:      $sql .= $email."','".$password."','".$title."','".$description."','";
  /var/www/html/prog/submission.php:      $result = mysql_query($sql);
  /var/www/html/prog/submission.php:      echo mysql_error(); 
  /var/www/html/prog/auth.php:  require('../classes/user.php'); 
  /var/www/html/prog/auth.php:  if (isset($_POST["user"]) and isset($_POST["password"]) )
  /var/www/html/prog/auth.php:    if (User::login($_POST["user"],$_POST["password"]))  
  /var/www/html/prog/db.php:    $lnk = @mysql_connect("localhost", "root", "dbhacklfi");
  /var/www/html/prog/db.php:    $db = mysql_select_db('deseclfi', $lnk);

```


## comando :grep -n "mysql_connect\|password\|user" /var/www/html/prog/submission.php

```ruby
  4:  public $id, $title, $email, $password, $description, $bio, $filename, $admin;
  5:  function __construct($id, $title, $email, $password, $description, $bio, $filename ){
  9:    $this->password = $password;
  18:                          $row['password'], $row['description'],
  24:      $sql .= "' and password='";
  25:      $sql .= mysql_real_escape_string( $_POST["password"]);
  121:      $sql = "INSERT INTO submisn/bash\ndaemon:x:1:1:daemon:/usrsions (email,password,";
  127:      $password = mysql_real_escape_string( $_POST["password"]);
  132:      $sql .= $email."','".$password."','".$title."','".$description."','";
```

