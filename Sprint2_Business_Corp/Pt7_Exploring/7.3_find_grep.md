a# üîç Explora√ß√£o do Site ‚Äî üë®‚Äçüî¨ Penetratium ‚ò¢Ô∏è - üß¨ Team üì°

## üîó Materia Seguran√ßa Ofensiva üìï

- üë®‚Äçüè´ **Professor:** JPGress
- üîç **Tipo:** Exploration 

---
# **üîé Comandos de Explora√ß√£o de Arquivos**

## comando : find /var/www/html -name "*.php" -exec grep -l "mysql_connect\|password\|user" {} \;

```ruby
  /var/www/html/prog/submission.php
  /var/www/html/prog/auth.php
  /var/www/html/prog/db.php
  /var/www/html/submit.php
  /var/www/html/login.php
```

## comando : grep -r "password\|user\|mysql" /var/www/html --include="*.php"

```ruby
  /var/www/html/prog/submission.php:  public $id, $title, $email, $password, $description, $bio, $filename, $admin;
  /var/www/html/prog/submission.php:  function __construct($id, $title, $email, $password, $description, $bio, $filename ){
  /var/www/html/prog/submission.php:    $this->password = $password;
  /var/www/html/prog/submission.php:                          $row['password'], $row['description'],
  /var/www/html/prog/submission.php:      $sql .= mysql_real_escape_string( $_POST["email"]);
  /var/www/html/prog/submission.php:      $sql .= "' and password='";
  /var/www/html/prog/submission.php:      $sql .= mysql_real_escape_string( $_POST["password"]);
  /var/www/html/prog/submission.php:      $result = mysql_query($sql);
  /var/www/html/prog/submission.php:      while ($row = mysql_fetch_assoc($result)) {
  /var/www/html/prog/submission.php:    $results = mysql_query("SELECT * FROM submissions");
  /var/www/html/prog/submission.php:      while ($row = mysql_fetch_assoc($results)) {
  /var/www/html/prog/submission.php:      echo mysql_error();
  /var/www/html/prog/submission.php:    $result = mysql_query("SELECT * FROM pictures where id=".$id);
  /var/www/html/prog/submission.php:    $row = mysql_fetch_assoc($result); 
  /var/www/html/prog/submission.php:    $result = mysql_query("DELETE FROM pictures where id=".(int)$id);
  /var/www/html/prog/submission.php:    $result= mysql_query("SELECT * FROM pictures ORDER BY id DESC LIMIT 1");
  /var/www/html/prog/submission.php:    $row = mysql_fetch_assoc($result);
  /var/www/html/prog/submission.php:    $result= mysql_query("SELECT * FROM pictures where id=".$id);
  /var/www/html/prog/submission.php:    $row = mysql_fetch_assoc($result);
  /var/www/html/prog/submission.php:      $sql = "INSERT INTO submissions (email,password,";
  /var/www/html/prog/submission.php:      $title = mysql_real_escape_string($_POST["title"]);
  /var/www/html/prog/submission.php:      $file = $dir.mysql_real_escape_string( $file);
  /var/www/html/prog/submission.php:      $email = mysql_real_escape_string( $_POST["email"]);
  /var/www/html/prog/submission.php:      $password = mysql_real_escape_string( $_POST["password"]);
  /var/www/html/prog/submission.php:      $bio = mysql_real_escape_string( $_POST["bio"]);
  /var/www/html/prog/submission.php:      $description = mysql_real_escape_string( $_POST["description"]);
  /var/www/html/prog/submission.php:      $sql .= $email."','".$password."','".$title."','".$description."','";
  /var/www/html/prog/submission.php:      $result = mysql_query($sql);
  /var/www/html/prog/submission.php:      echo mysql_error(); 
  /var/www/html/prog/auth.php:  require('../classes/user.php'); 
  /var/www/html/prog/auth.php:  if (isset($_POST["user"]) and isset($_POST["password"]) )
  /var/www/html/prog/auth.php:    if (User::login($_POST["user"],$_POST["password"]))  
  /var/www/html/prog/db.php:    $lnk = @mysql_connect("localhost", "root", "dbhacklfi");
  /var/www/html/prog/db.php:    $db = mysql_select_db('deseclfi', $lnk);

```


## comando :grep -n "mysql_connect\|password\|user" /var/www/html/prog/submission.php

```ruby
  4:  public $id, $title, $email, $password, $description, $bio, $filename, $admin;
  5:  function __construct($id, $title, $email, $password, $description, $bio, $filename ){
  9:    $this->password = $password;
  18:                          $row['password'], $row['description'],
  24:      $sql .= "' and password='";
  25:      $sql .= mysql_real_escape_string( $_POST["password"]);
  121:      $sql = "INSERT INTO submisn/bash\ndaemon:x:1:1:daemon:/usrsions (email,password,";
  127:      $password = mysql_real_escape_string( $_POST["password"]);
  132:      $sql .= $email."','".$password."','".$title."','".$description."','";
```


## comando : cat /etc/crontab
```ruby
  # /etc/crontab: system-wide crontab
  # Unlike any other crontab you don't have to run the `crontab'
  # command to install the new version when you edit this file
  # and files in /etc/cron.d. These files also have username fields,
  # that none of the other crontabs do.
  
  SHELL=/bin/sh
  PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
  
  # m h dom mon dow user	command
  17 *	* * *	root    cd / && run-parts --report /etc/cron.hourly
  25 6	* * *	root	test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )
  47 6	* * 7	root	test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )
  52 6	1 * *	root	test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )
```


# **‚è∞ Comandos de Agendamento (Cron)**

## comando : ls -la /etc/cron.d/
```ruby
  total 16
  drwxr-xr-x  2 root root 4096 Sep 16 19:11 .
  drwxr-xr-x 93 root root 4096 Sep 19 06:28 ..
  -rw-r--r--  1 root root  102 Feb  9  2013 .placeholder
  -rw-r--r--  1 root root  510 Jul 28  2016 php5
```
## comando : ls -la /etc/cron.daily/
```ruby
  drwxr-xr-x  2 root root  4096 Sep 16 18:36 .
  drwxr-xr-x 93 root root  4096 Sep 19 06:28 ..
  -rw-r--r--  1 root root   102 Feb  9  2013 .placeholder
  -rwxr-xr-x  1 root root   625 Jul 15  2016 apache2
  -rwxr-xr-x  1 root root   376 Apr  4  2014 apport
  -rwxr-xr-x  1 root root 15481 Apr 10  2014 apt
  -rwxr-xr-x  1 root root   314 Feb 17  2014 aptitude
  -rwxr-xr-x  1 root root   355 Jun  4  2013 bsdmainutils
  -rwxr-xr-x  1 root root   256 Mar  7  2014 dpkg
  -rwxr-xr-x  1 root root   372 Jan 22  2014 logrotate
  -rwxr-xr-x  1 root root  1261 Sep 23  2014 man-db
  -rwxr-xr-x  1 root root   435 Jun 20  2013 mlocate
  -rwxr-xr-x  1 root root   249 Feb 16  2014 passwd
  -rwxr-xr-x  1 root root  2417 May 13  2013 popularity-contest
  -rwxr-xr-x  1 root root   214 Oct  6  2014 update-notifier-common
  -rwxr-xr-x  1 root root   328 Jul 18  2014 upstart
```
## ls -la /etc/cron.weekly/
```ruby
total 28
  drwxr-xr-x  2 root root 4096 Sep 16 18:35 .
  drwxr-xr-x 93 root root 4096 Sep 19 06:28 ..
  -rw-r--r--  1 root root  102 Feb  9  2013 .placeholder
  -rwxr-xr-x  1 root root  730 Feb 23  2014 apt-xapian-index
  -rwxr-xr-x  1 root root  427 Apr 16  2014 fstrim
  -rwxr-xr-x  1 root root  771 Sep 23  2014 man-db
  -rwxr-xr-x  1 root root  211 Oct  6  2014 update-notifier-common
```
## ps aux | grep cron
```ruby
  root       989  0.0  0.4  23656  2320 ?        Ss   06:28   0:00 cron
  www-data  4399  0.0  0.1   4448   796 ?        S    13:02   0:00 sh -c ps aux | grep cron
  www-data  4401  0.0  0.1   8872   804 ?        S    13:02   0:00 grep cron
```
